<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Buttons Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .mark-complete {
            background-color: #10b981;
            color: white;
        }
        .view-details {
            background-color: white;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        .button:hover {
            opacity: 0.9;
        }
        .log {
            background-color: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .success { background-color: #d1fae5; color: #065f46; }
        .error { background-color: #fee2e2; color: #991b1b; }
        .info { background-color: #dbeafe; color: #1e40af; }
    </style>
</head>
<body>
    <h1>Workflow Buttons Functionality Test</h1>
    
    <div class="test-container">
        <h2>Button Click Test</h2>
        <p>Click the buttons below to test their functionality:</p>
        
        <button class="button mark-complete" onclick="testMarkComplete()">
            Mark Complete
        </button>
        
        <button class="button view-details" onclick="testViewDetails()">
            View Details
        </button>
        
        <div id="log" class="log"></div>
    </div>
    
    <div class="test-container">
        <h2>API Endpoint Test</h2>
        <p>Testing API connectivity:</p>
        
        <button class="button" onclick="testAPIEndpoints()">
            Test API Endpoints
        </button>
        
        <div id="api-log" class="log"></div>
    </div>
    
    <div class="test-container">
        <h2>Navigation Test</h2>
        <p>Testing navigation functionality:</p>
        
        <button class="button" onclick="testNavigation()">
            Test Navigation
        </button>
        
        <div id="nav-log" class="log"></div>
    </div>

    <script>
        let logCount = 0;
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('log');
            const statusClass = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            const statusSpan = `<span class="status ${statusClass}">[${type.toUpperCase()}]</span>`;
            logElement.innerHTML += `${statusSpan} [${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            logCount++;
        }
        
        function testMarkComplete() {
            log('Testing Mark Complete button functionality...');
            
            // Simulate the workflow stepper behavior
            const quotationId = 'test-quotation-123';
            const quotationNumber = 'QT-2024-001';
            
            log(`Quotation ID: ${quotationId}`);
            log(`Quotation Number: ${quotationNumber}`);
            
            // Simulate navigation to customer acceptance page
            const acceptanceUrl = `/quotations/${quotationId}/acceptance`;
            log(`Would navigate to: ${acceptanceUrl}`);
            
            // Check if the route exists (simulate)
            if (acceptanceUrl.includes('/quotations/') && acceptanceUrl.includes('/acceptance')) {
                log('✅ Mark Complete navigation path is valid', 'success');
            } else {
                log('❌ Mark Complete navigation path is invalid', 'error');
            }
        }
        
        function testViewDetails() {
            log('Testing View Details button functionality...');
            
            // Simulate the workflow stepper behavior
            const quotationId = 'test-quotation-123';
            
            log(`Quotation ID: ${quotationId}`);
            
            // Simulate navigation to quotation details page
            const detailsUrl = `/quotations/${quotationId}`;
            log(`Would navigate to: ${detailsUrl}`);
            
            // Check if the route exists (simulate)
            if (detailsUrl.includes('/quotations/') && !detailsUrl.includes('/acceptance')) {
                log('✅ View Details navigation path is valid', 'success');
            } else {
                log('❌ View Details navigation path is invalid', 'error');
            }
        }
        
        async function testAPIEndpoints() {
            const apiLog = document.getElementById('api-log');
            apiLog.innerHTML = '';
            
            const endpoints = [
                '/api/quotations',
                '/api/customer-acceptances',
                '/api/dashboard/stats'
            ];
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint);
                    const status = response.ok ? 'success' : 'error';
                    const message = `${endpoint}: ${response.status} ${response.statusText}`;
                    
                    apiLog.innerHTML += `<span class="status ${status}">[${status.toUpperCase()}]</span> ${message}\n`;
                } catch (error) {
                    apiLog.innerHTML += `<span class="status error">[ERROR]</span> ${endpoint}: ${error.message}\n`;
                }
            }
        }
        
        function testNavigation() {
            const navLog = document.getElementById('nav-log');
            navLog.innerHTML = '';
            
            // Test navigation patterns
            const testRoutes = [
                { path: '/quotations/123', description: 'Quotation Detail Page' },
                { path: '/quotations/123/acceptance', description: 'Customer Acceptance Page' },
                { path: '/dashboard', description: 'Dashboard Page' }
            ];
            
            testRoutes.forEach(route => {
                const isValid = route.path.startsWith('/') && route.path.length > 1;
                const status = isValid ? 'success' : 'error';
                navLog.innerHTML += `<span class="status ${status}">[${status.toUpperCase()}]</span> ${route.path} - ${route.description}\n`;
            });
        }
        
        // Initialize
        log('Workflow Buttons Test initialized');
        log('Click the buttons above to test functionality');
    </script>
</body>
</html>
